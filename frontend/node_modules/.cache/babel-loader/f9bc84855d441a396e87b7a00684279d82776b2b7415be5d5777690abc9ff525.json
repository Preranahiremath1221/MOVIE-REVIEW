{"ast":null,"code":"import React,{useContext,useEffect,useState}from'react';import{AuthContext}from'../context/AuthContext';import{Link}from'react-router-dom';import axios from'axios';import Loading from'./Loading';import Error from'./Error';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function Watchlist(){const{user}=useContext(AuthContext);const[watchlist,setWatchlist]=useState([]);const[loading,setLoading]=useState(true);const[error,setError]=useState(null);useEffect(()=>{if(!user){setLoading(false);return;}const fetchWatchlist=async()=>{try{const res=await axios.get(\"/api/users/\".concat(user._id,\"/watchlist\"));setWatchlist(res.data);}catch(err){setError('Failed to load watchlist');}finally{setLoading(false);}};fetchWatchlist();},[user]);const removeFromWatchlist=async movieId=>{try{await axios.delete(\"/api/users/\".concat(user._id,\"/watchlist/\").concat(movieId));setWatchlist(watchlist.filter(movie=>movie._id!==movieId));}catch(err){setError('Failed to remove from watchlist');}};if(loading)return/*#__PURE__*/_jsx(Loading,{});if(error)return/*#__PURE__*/_jsx(Error,{message:error});if(!user)return/*#__PURE__*/_jsx(\"p\",{children:\"Please login to view your watchlist.\"});return/*#__PURE__*/_jsxs(\"div\",{className:\"watchlist\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"My Watchlist\"}),watchlist.length===0?/*#__PURE__*/_jsxs(\"p\",{children:[\"Your watchlist is empty. \",/*#__PURE__*/_jsx(Link,{to:\"/movies\",children:\"Browse movies\"}),\" to add some!\"]}):/*#__PURE__*/_jsx(\"div\",{className:\"movies-grid\",children:watchlist.map(movie=>/*#__PURE__*/_jsxs(\"div\",{className:\"movie-card\",children:[/*#__PURE__*/_jsx(\"img\",{src:movie.poster_path,alt:movie.title}),/*#__PURE__*/_jsxs(\"div\",{className:\"movie-info\",children:[/*#__PURE__*/_jsx(\"h3\",{children:movie.title}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Rating: \",movie.vote_average,\"/10\"]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Year: \",new Date(movie.release_date).getFullYear()]}),/*#__PURE__*/_jsxs(\"div\",{className:\"card-actions\",children:[/*#__PURE__*/_jsx(Link,{to:\"/movies/\".concat(movie._id),className:\"btn-small\",children:\"View Details\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>removeFromWatchlist(movie._id),className:\"btn-secondary\",children:\"Remove\"})]})]})]},movie._id))})]});}export default Watchlist;","map":{"version":3,"names":["React","useContext","useEffect","useState","AuthContext","Link","axios","Loading","Error","jsx","_jsx","jsxs","_jsxs","Watchlist","user","watchlist","setWatchlist","loading","setLoading","error","setError","fetchWatchlist","res","get","concat","_id","data","err","removeFromWatchlist","movieId","delete","filter","movie","message","children","className","length","to","map","src","poster_path","alt","title","vote_average","Date","release_date","getFullYear","onClick"],"sources":["C:/Users/prera/Downloads/MOVIE REVIEW/frontend/src/components/Watchlist.jsx"],"sourcesContent":["import React, { useContext, useEffect, useState } from 'react';\r\nimport { AuthContext } from '../context/AuthContext';\r\nimport { Link } from 'react-router-dom';\r\nimport axios from 'axios';\r\nimport Loading from './Loading';\r\nimport Error from './Error';\r\n\r\nfunction Watchlist() {\r\n  const { user } = useContext(AuthContext);\r\n  const [watchlist, setWatchlist] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n\r\n  useEffect(() => {\r\n    if (!user) {\r\n      setLoading(false);\r\n      return;\r\n    }\r\n\r\n    const fetchWatchlist = async () => {\r\n      try {\r\n        const res = await axios.get(`/api/users/${user._id}/watchlist`);\r\n        setWatchlist(res.data);\r\n      } catch (err) {\r\n        setError('Failed to load watchlist');\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    fetchWatchlist();\r\n  }, [user]);\r\n\r\n  const removeFromWatchlist = async (movieId) => {\r\n    try {\r\n      await axios.delete(`/api/users/${user._id}/watchlist/${movieId}`);\r\n      setWatchlist(watchlist.filter(movie => movie._id !== movieId));\r\n    } catch (err) {\r\n      setError('Failed to remove from watchlist');\r\n    }\r\n  };\r\n\r\n  if (loading) return <Loading />;\r\n  if (error) return <Error message={error} />;\r\n  if (!user) return <p>Please login to view your watchlist.</p>;\r\n\r\n  return (\r\n    <div className=\"watchlist\">\r\n      <h2>My Watchlist</h2>\r\n      {watchlist.length === 0 ? (\r\n        <p>Your watchlist is empty. <Link to=\"/movies\">Browse movies</Link> to add some!</p>\r\n      ) : (\r\n        <div className=\"movies-grid\">\r\n          {watchlist.map(movie => (\r\n            <div key={movie._id} className=\"movie-card\">\r\n              <img src={movie.poster_path} alt={movie.title} />\r\n              <div className=\"movie-info\">\r\n                <h3>{movie.title}</h3>\r\n                <p>Rating: {movie.vote_average}/10</p>\r\n                <p>Year: {new Date(movie.release_date).getFullYear()}</p>\r\n                <div className=\"card-actions\">\r\n                  <Link to={`/movies/${movie._id}`} className=\"btn-small\">View Details</Link>\r\n                  <button onClick={() => removeFromWatchlist(movie._id)} className=\"btn-secondary\">Remove</button>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          ))}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Watchlist;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}