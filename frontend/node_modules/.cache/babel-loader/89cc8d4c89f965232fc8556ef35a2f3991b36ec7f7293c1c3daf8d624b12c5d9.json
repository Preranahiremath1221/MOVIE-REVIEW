{"ast":null,"code":"import React,{useContext,useEffect,useState}from'react';import{AuthContext}from'../context/AuthContext';import axios from'axios';import Error from'./Error';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function Notifications(){const{user,notifications,fetchNotifications}=useContext(AuthContext);const[error,setError]=useState(null);useEffect(()=>{if(user&&notifications.length===0){fetchNotifications();}},[user,notifications.length,fetchNotifications]);const markAsRead=async notificationId=>{try{await axios.put(\"/api/notifications/\".concat(notificationId,\"/read\"));fetchNotifications();}catch(err){setError('Failed to mark notification as read');}};const deleteNotification=async notificationId=>{try{await axios.delete(\"/api/notifications/\".concat(notificationId));fetchNotifications();}catch(err){setError('Failed to delete notification');}};if(!user)return/*#__PURE__*/_jsx(Error,{message:\"Please login to view notifications\"});return/*#__PURE__*/_jsxs(\"div\",{className:\"notifications\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Notifications\"}),error&&/*#__PURE__*/_jsx(\"div\",{className:\"error-message\",children:error}),/*#__PURE__*/_jsx(\"div\",{className:\"notifications-list\",children:notifications.length===0?/*#__PURE__*/_jsx(\"p\",{children:\"No notifications yet.\"}):notifications.map(notification=>/*#__PURE__*/_jsxs(\"div\",{className:\"notification-card \".concat(!notification.isRead?'unread':''),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"notification-content\",children:[/*#__PURE__*/_jsx(\"p\",{children:notification.message}),/*#__PURE__*/_jsx(\"span\",{className:\"notification-date\",children:new Date(notification.createdAt).toLocaleDateString()})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"notification-actions\",children:[!notification.isRead&&/*#__PURE__*/_jsx(\"button\",{onClick:()=>markAsRead(notification._id),className:\"btn-secondary\",children:\"Mark as Read\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>deleteNotification(notification._id),className:\"btn-danger\",children:\"Delete\"})]})]},notification._id))})]});}export default Notifications;","map":{"version":3,"names":["React","useContext","useEffect","useState","AuthContext","axios","Error","jsx","_jsx","jsxs","_jsxs","Notifications","user","notifications","fetchNotifications","error","setError","length","markAsRead","notificationId","put","concat","err","deleteNotification","delete","message","className","children","map","notification","isRead","Date","createdAt","toLocaleDateString","onClick","_id"],"sources":["C:/Users/prera/Downloads/MOVIE REVIEW/frontend/src/components/Notifications.jsx"],"sourcesContent":["import React, { useContext, useEffect, useState } from 'react';\r\nimport { AuthContext } from '../context/AuthContext';\r\nimport axios from 'axios';\r\nimport Error from './Error';\r\n\r\nfunction Notifications() {\r\n  const { user, notifications, fetchNotifications } = useContext(AuthContext);\r\n  const [error, setError] = useState(null);\r\n\r\n  useEffect(() => {\r\n    if (user && notifications.length === 0) {\r\n      fetchNotifications();\r\n    }\r\n  }, [user, notifications.length, fetchNotifications]);\r\n\r\n  const markAsRead = async (notificationId) => {\r\n    try {\r\n      await axios.put(`/api/notifications/${notificationId}/read`);\r\n      fetchNotifications();\r\n    } catch (err) {\r\n      setError('Failed to mark notification as read');\r\n    }\r\n  };\r\n\r\n  const deleteNotification = async (notificationId) => {\r\n    try {\r\n      await axios.delete(`/api/notifications/${notificationId}`);\r\n      fetchNotifications();\r\n    } catch (err) {\r\n      setError('Failed to delete notification');\r\n    }\r\n  };\r\n\r\n  if (!user) return <Error message=\"Please login to view notifications\" />;\r\n\r\n  return (\r\n    <div className=\"notifications\">\r\n      <h1>Notifications</h1>\r\n\r\n      {error && <div className=\"error-message\">{error}</div>}\r\n\r\n      <div className=\"notifications-list\">\r\n        {notifications.length === 0 ? (\r\n          <p>No notifications yet.</p>\r\n        ) : (\r\n          notifications.map(notification => (\r\n            <div key={notification._id} className={`notification-card ${!notification.isRead ? 'unread' : ''}`}>\r\n              <div className=\"notification-content\">\r\n                <p>{notification.message}</p>\r\n                <span className=\"notification-date\">\r\n                  {new Date(notification.createdAt).toLocaleDateString()}\r\n                </span>\r\n              </div>\r\n              <div className=\"notification-actions\">\r\n                {!notification.isRead && (\r\n                  <button onClick={() => markAsRead(notification._id)} className=\"btn-secondary\">\r\n                    Mark as Read\r\n                  </button>\r\n                )}\r\n                <button onClick={() => deleteNotification(notification._id)} className=\"btn-danger\">\r\n                  Delete\r\n                </button>\r\n              </div>\r\n            </div>\r\n          ))\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Notifications;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}